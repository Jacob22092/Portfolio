:root{
  --bg: #0b1220;
  --panel: #0f172a;
  --txt: #e6edf3;
  --muted: #9fb0c0;
  --line: #1e293b;

  --accent: #60a5fa;
  --accent-2: #8b5cf6;

  --radius: 16px;
  --shadow-1: 0 10px 30px rgba(2,6,23,.25);
  --container: 1140px;

  --sans: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Noto Sans", "Helvetica Neue", Arial, sans-serif;
  --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}
html[data-theme="light"]{
  --bg: #f8fafc;
  --panel: #ffffff;
  --txt: #0b1220;
  --muted: #475569;
  --line: #e2e8f0;
  --shadow-1: 0 10px 24px rgba(2,6,23,.08);
}

*,
*::before,
*::after{ box-sizing: border-box; }
html, body{ height: 100%; }
html{ scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce){ html{ scroll-behavior: auto; } }
body{
  margin: 0; font-family: var(--sans); color: var(--txt);
  background:
    radial-gradient(1000px 680px at 110% -10%, color-mix(in oklab, var(--accent-2) 18%, transparent), transparent 60%),
    radial-gradient(1100px 720px at -10% 0%, color-mix(in oklab, var(--accent) 20%, transparent), transparent 55%),
    var(--bg);
  line-height: 1.6; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}
img{ max-width: 100%; height: auto; display: block; }
a{ color: inherit; text-decoration: none; }
.container{ width: min(100% - 2rem, var(--container)); margin-inline: auto; }

/* Micro-noise overlay — słabsze na mobile */
.noise-layer{
  position: fixed; inset: 0; pointer-events: none; z-index: 1; opacity: .03; mix-blend-mode: overlay;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
  background-size: 220px 220px;
}
@media (max-width: 700px){ .noise-layer{ opacity: .02; } }
@media (prefers-reduced-transparency: reduce){
  .noise-layer{ display:none; }
}

/* Sekcje — content-visibility dla oszczędności renderu */
.section{
  padding: clamp(56px, 9vw, 110px) 0; position: relative; scroll-margin-top: 84px;
  content-visibility: auto; contain-intrinsic-size: 720px;
}
.section:nth-child(odd)::before{
  content:""; position:absolute; inset:-20px 0 auto 0; height: 140px; pointer-events:none;
  background: linear-gradient(to bottom, color-mix(in oklab, var(--panel) 10%, transparent), transparent);
}
.section:nth-child(even)::after{
  content:""; position:absolute; inset:auto 0 -20px 0; height: 140px; pointer-events:none;
  background: linear-gradient(to top, color-mix(in oklab, var(--panel) 10%, transparent), transparent);
}

.lead{ font-size: clamp(1rem, 1.3vw, 1.125rem); color: var(--muted); }
.mono{ font-family: var(--mono); }
.muted{ color: var(--muted); }

/* Skip link */
.skip-link{
  position: absolute; left: 1rem; top: 1rem; z-index: 2000;
  background: var(--txt); color: var(--bg); padding: .5rem .75rem; border-radius: 10px; transform: translateY(-140%);
}
.skip-link:focus{ transform: translateY(0); }

/* Header (sticky) */
.site-header{
  position: sticky; top: 0; z-index: 1000;
  background: color-mix(in oklab, var(--bg) 80%, transparent);
  backdrop-filter: saturate(120%) blur(8px);
  border-bottom: 1px solid transparent;
  transition: border-color .2s ease, background-color .2s ease, transform .2s ease;
}
.site-header.scrolled{
  background: color-mix(in oklab, var(--bg) 95%, transparent);
  border-bottom-color: var(--line);
}
.scroll-progress{
  position: absolute; left: 0; top: 0; width: 100%; height: 3px; background: transparent; overflow: hidden;
}
.scroll-progress #scrollBar{
  display: block; height: 100%; width: 0%;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
}

.header-inner{
  display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 10px 0; min-height: 64px;
}
.brand{ display: inline-flex; align-items: center; gap: 10px; white-space: nowrap; flex-shrink: 0; }
.brand-avatar{
  width: 36px; height: 36px; border-radius: 50%;
  border: 2px solid color-mix(in oklab, var(--accent) 50%, #fff 50%);
}
.brand-text{ display: grid; line-height: 1.1; }
.brand-name{ font-weight: 800; letter-spacing: .2px; }
.brand-role{ color: var(--muted); font-size: .86rem; }
@media (max-width: 1100px){ .brand-role{ display: none; } }

/* NAV */
.nav{ display: flex; align-items: center; gap: 10px; flex: 1 1 auto; min-width: 0; }
.nav-list{
  list-style: none; margin: 0; padding: 0; display: flex; align-items: center; gap: 6px;
  flex-wrap: nowrap; white-space: nowrap; overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch; scrollbar-width: none; max-width: 100%;
}
.nav-list::-webkit-scrollbar{ display: none; }
.nav-list > li{ list-style: none; flex: 0 0 auto; }
.nav-link{
  display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 12px; color: var(--muted);
  line-height: 1; vertical-align: middle; white-space: nowrap; position: relative;
}
.nav-link .iconify{ font-size: 18px; }
.nav-link:hover, .nav-link.active{
  color: var(--txt);
  background: color-mix(in oklab, var(--accent) 18%, transparent);
}
.nav-link::after{
  content:""; position:absolute; left:12px; right:12px; bottom:4px; height:2px;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  opacity:0; transform: scaleX(0); transform-origin: left; transition: transform .25s ease, opacity .25s ease;
}
.nav-link:hover::after{ opacity:.4; transform: scaleX(1); }
.nav-link.active::after{ opacity:.9; transform: scaleX(1); }

.nav-toggle{
  display: none; border: 1px solid var(--line); background: var(--panel); color: var(--txt);
  border-radius: 10px; padding: 8px 10px; cursor: pointer;
}
.nav-bar{ display: block; width: 22px; height: 2px; background: currentColor; margin: 4px 0; border-radius: 2px; }

.header-actions{ display: flex; gap: 8px; align-items: center; flex-shrink: 0; }
.btn{
  display: inline-flex; align-items: center; justify-content: center; gap: 6px;
  padding: 9px 14px; border-radius: 12px; border: 1px solid var(--line); background: var(--panel); color: var(--txt); cursor: pointer;
  box-shadow: var(--shadow-1); transition: transform .15s ease;
}
.btn.primary{ background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #081017; border: none; }
.btn.ghost{ background: transparent; }
.btn.outline{ background: transparent; border: 1px solid var(--line); }

.accent-picker-label{
  border: 1px solid var(--line); border-radius: 12px; padding: 6px 8px; display: inline-flex; align-items: center; gap: 6px; background: var(--panel);
}
#accentPicker{ inline-size: 26px; block-size: 26px; border: none; background: transparent; cursor: pointer; padding: 0; }

/* Mobile */
@media (max-width: 980px){
  .nav-toggle{ display: inline-grid; place-items: center; }
  .nav-list{
    position: fixed; inset: 64px 12px auto 12px; background: var(--panel);
    border: 1px solid var(--line); border-radius: 14px; padding: 10px;
    display: grid; gap: 6px; box-shadow: var(--shadow-1);
    opacity: 0; transform: translateY(-10px); pointer-events: none; transition: .18s ease;
    overflow: auto; white-space: normal;
  }
  .nav-list.open{ opacity: 1; transform: translateY(0); pointer-events: auto; }
}
/* Ukryj color picker na mobile */
@media (max-width: 700px){
  .accent-picker-label{ display: none; }
}

/* Hero */
.hero{ position: relative; isolation: isolate; padding-top: clamp(24px, 4vw, 50px); overflow: clip; }
.hero-bg{
  position: absolute; inset: 0; z-index: -1;
  background: radial-gradient(800px 500px at 90% -10%, color-mix(in oklab, var(--accent) 20%, transparent), transparent 60%),
              radial-gradient(700px 450px at -10% 0%, color-mix(in oklab, var(--accent-2) 20%, transparent), transparent 55%);
}
.blob{
  position: absolute; width: 520px; height: 520px; filter: blur(90px); opacity: .32; border-radius: 50%;
  background: radial-gradient(closest-side, var(--accent), transparent);
  mix-blend-mode: screen; animation: float 16s ease-in-out infinite;
}
@media (max-width: 900px){ .blob{ display: none; } } /* ciężkie na mobile -> off */
.blob.b1{ left: -120px; top: -160px; }
.blob.b2{ right: -160px; top: -120px; background: radial-gradient(closest-side, var(--accent-2), transparent); animation-duration: 20s; }
.blob.b3{ left: 40%; bottom: -220px; animation-duration: 22s; }
@keyframes float{ 0%,100%{ transform: translateY(0) scale(1); } 50%{ transform: translateY(-26px) scale(1.04); } }
#constellation{ position: absolute; inset: 0; width: 100%; height: 100%; opacity: .28; }

.hero-inner{
  display: grid; grid-template-columns: .9fr 1.1fr; gap: 24px; align-items: center;
}
@media (max-width: 900px){ .hero-inner{ grid-template-columns: 1fr; text-align: center; } }
.avatar{
  width: 240px; height: 240px; border-radius: 50%; object-fit: cover; border: 3px solid color-mix(in oklab, var(--accent) 55%, #fff 45%);
  box-shadow: 0 0 0 8px color-mix(in oklab, var(--accent) 18%, transparent);
  position: relative; z-index: 0; margin-inline: auto;
}
.avatar::before{
  content:""; position:absolute; inset:-10px; border-radius: 50%;
  background: conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent));
  filter: blur(14px); opacity:.22; z-index:-1; animation: ring-rot 40s linear infinite;
}
@keyframes ring-rot{ to{ transform: rotate(360deg); } }
@media (prefers-reduced-motion: reduce){
  .avatar::before{ animation: none; }
}

.hero-content h1{ font-size: clamp(28px, 4.6vw, 48px); margin: 0; line-height: 1.1; }
.hero-cta{ display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
.chips{ list-style: none; padding: 0; margin: 12px 0 0; display: flex; flex-wrap: wrap; gap: 8px; }
.chips li{
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 10px; border: 1px solid var(--line); border-radius: 999px; color: var(--muted); background: color-mix(in oklab, var(--panel) 92%, transparent);
}

/* About rework */
.about-grid{ display: grid; gap: 16px; }
.about-intro p{ margin: 0 0 8px; }
.about-cards{ display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; }
@media (max-width: 900px){ .about-cards{ grid-template-columns: 1fr; } }
.about-card{
  border: 1px solid var(--line); border-radius: 14px; padding: 12px; background: color-mix(in oklab, var(--panel) 96%, transparent);
  box-shadow: var(--shadow-1);
}
.about-card h3{ margin: 0 0 6px; display: flex; align-items: center; gap: 8px; }

/* Experience timeline */
.exp-timeline { list-style: none; margin: 0; padding: 0; display: grid; gap: 28px; max-width: 900px; }
.exp-step { display: grid; grid-template-columns: 54px 1fr; gap: 18px; position: relative; align-items: flex-start; }
.exp-step::after { content: ""; position: absolute; left: 26px; top: 56px; bottom: -12px; width: 2px; background: linear-gradient(180deg, var(--accent) 0%, var(--line) 100%); z-index: 0; pointer-events: none; }
.exp-step:last-child::after { display: none; }
.exp-logo { position: relative; z-index: 2; }
.exp-logo img { width: 44px; height: 44px; border-radius: 12px; background: #fff; object-fit: contain; box-shadow: 0 4px 18px color-mix(in oklab, var(--accent-2) 20%, transparent); border: 1px solid var(--line); filter: grayscale(.25); transition: filter .25s ease; }
.exp-step:hover .exp-logo img{ filter: grayscale(0); }
.exp-step .exp-logo::after{ content:""; position:absolute; left: 50%; top: 52px; transform: translateX(-50%); width: 10px; height: 10px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #fff, var(--accent)); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 25%, transparent); z-index: 1; }
.exp-content { position: relative; z-index: 1; background: color-mix(in oklab,var(--panel)98%,transparent); border-radius: 14px; border: 1px solid var(--line); box-shadow: var(--shadow-1); padding: 12px 14px; min-width: 0; }
.exp-head { display: flex; flex-wrap: wrap; align-items: baseline; gap: 10px 18px; margin-bottom: 6px; }
.exp-time { font-size: .96em; }
.exp-head h3 { margin: 0; font-size: 1.08em; flex: 1 1 100%; }
.chips-row { display: flex; gap: 6px; flex-wrap: wrap; }
.chip { padding: 6px 10px; border: 1px solid var(--line); border-radius: 999px; font-size: .95em; background: var(--panel); color: var(--muted); }
.chip.solid { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #081017; border:none; }
.points { margin: 0; padding-left: 18px; }
.sub { margin-top: 8px; color: var(--muted); font-size: .96em; }
@media (max-width:700px){ .exp-timeline { gap: 22px;} .exp-step { grid-template-columns: 1fr; gap: 10px;} .exp-step::after { display: none; } .exp-logo { margin-bottom: 6px;} }

/* Tech (no bars) */
.skill-grid{ display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 10px; }
@media (max-width: 1100px){ .skill-grid{ grid-template-columns: repeat(2,1fr); } }
@media (max-width: 700px){ .skill-grid{ grid-template-columns: 1fr; } }
.skill{ border: 1px solid var(--line); border-radius: 14px; padding: 12px; background: color-mix(in oklab, var(--panel) 96%, transparent); box-shadow: var(--shadow-1); }
.skill-head{ display: flex; align-items: center; gap: 8px; font-weight: 700; }

/* Projects */
.projects{ display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 16px; }
@media (max-width: 1100px){ .projects{ grid-template-columns: repeat(2,1fr); } }
@media (max-width: 700px){ .projects{ grid-template-columns: 1fr; } }
.project{
  position: relative; border-radius: 16px; overflow: clip; background: color-mix(in oklab, var(--panel) 96%, transparent);
  border: 1px solid var(--line); box-shadow: var(--shadow-1); transition: transform .18s ease, box-shadow .18s ease;
}
.project:hover{ transform: translateY(-2px); box-shadow: 0 20px 40px rgba(0,0,0,.25); }
.feature-border{ position:absolute; inset:0; border-radius: inherit; pointer-events:none; z-index:1; background: conic-gradient(from 180deg at 50% 50%, var(--accent), var(--accent-2), var(--accent)); opacity:.18; filter: blur(18px); transition: opacity .25s ease, filter .25s ease; }
.project:hover .feature-border{ opacity:.28; filter: blur(12px); }
.project::after{ content:""; position:absolute; inset:-2px; border-radius: inherit; z-index: 2; pointer-events: none; background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.08) 40%, transparent 60%); transform: translateX(-120%); transition: transform .6s ease; }
.project:hover::after{ transform: translateX(120%); }

.thumb{ aspect-ratio: 16/9; background: #0a0f1a; position: relative; }
.thumb img{ width: 100%; height: 100%; object-fit: cover; filter: saturate(1.04) contrast(1.03); }
.body{ position: relative; z-index:2; padding: 14px; display: grid; gap: 10px; }
.body h3{ margin: 0; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }
.body p{ margin: 0; color: var(--muted); }
.tags{ list-style:none; padding:0; margin:0; display:flex; gap:8px; flex-wrap:wrap; }
.tags li{ display:flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid var(--line); border-radius:999px; color:var(--muted); background: color-mix(in oklab, var(--panel) 94%, transparent); }

/* Specjalna karta GH (więcej) */
.thumb-gh{ background: radial-gradient(240px 160px at 50% 50%, color-mix(in oklab, var(--accent) 18%, transparent), transparent), #0b0f18; display:grid; place-items:center; }
.thumb-gh img{ width: 96px; height: 96px; object-fit: contain; filter:none; }

/* Edukacja / Kompetencje */
.edu{ list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; }
.edu li{ border: 1px solid var(--line); border-radius: 12px; padding: 10px 12px; display: flex; align-items: center; justify-content: space-between; gap: 10px; background: color-mix(in oklab, var(--panel) 96%, transparent); }
.edu .meta{ color: var(--muted); font-size: .95rem; }
.edu .time{ color: var(--muted); font-family: var(--mono); }
.skills-cards{ display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 12px; }
@media (max-width: 1100px){ .skills-cards{ grid-template-columns: repeat(2,1fr); } }
@media (max-width: 700px){ .skills-cards{ grid-template-columns: 1fr; } }
.skill-card{ border: 1px solid var(--line); border-radius: 14px; padding: 12px; background: color-mix(in oklab, var(--panel) 96%, transparent); }

/* Kontakt */
.contact-form{ display: grid; gap: 10px; background: color-mix(in oklab, var(--panel) 96%, transparent); padding: 16px; border-radius: 14px; border: 1px solid var(--line); box-shadow: var(--shadow-1); max-width: 640px; position: relative; }
.hp{ position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
.contact-form label{ display: grid; gap: 6px; }
input, textarea{ width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--line); background: color-mix(in oklab, var(--panel) 96%, transparent); color: var(--txt); }
input:focus, textarea:focus{ outline: 2px solid color-mix(in oklab, var(--accent) 50%, transparent); outline-offset: 2px; }
.error{ color: #ef4444; min-height: 1em; font-size: .9rem; }
.form-actions{ display: flex; align-items: center; gap: 12px; }
.form-status{ color: var(--muted); }
.contact{ list-style: none; padding: 0; margin: 14px 0 0; display: grid; gap: 6px; }
.contact a{ text-decoration: underline; text-underline-offset: 3px; }

/* Footer */
.site-footer{ border-top: 1px solid var(--line); }
.footer-inner{ display: flex; align-items: center; justify-content: space-between; gap: 10px; padding: 14px 0; }

/* Floating To-Top FAB */
.to-top-fab{
  position: fixed; right: 16px; bottom: 16px; z-index: 1100;
  width: 44px; height: 44px; border-radius: 999px; border: 1px solid var(--line);
  background: var(--panel); color: var(--txt);
  box-shadow: var(--shadow-1);
  display: grid; place-items: center;
  opacity: 0; transform: translateY(10px); pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
}
.to-top-fab.show{ opacity: .95; transform: translateY(0); pointer-events: auto; }
.to-top-fab:hover{ transform: translateY(-2px); }

/* H2 underline reveal */
.section h2{ position: relative; padding-bottom: 8px; margin-bottom: 12px; }
.section h2::after{ content:""; position:absolute; left:0; bottom:0; height:3px; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .6s ease; }
h2.revealed::after{ width: 100%; }

/* Reveal (bez GSAP) */
.reveal-y, .reveal-pop{ transition: opacity .6s ease, transform .6s ease; will-change: opacity, transform; }
.reveal-y{ opacity: 0; transform: translateY(16px); }
.reveal-y.in{ opacity: 1; transform: translateY(0); }
.reveal-pop{ opacity: 0; transform: scale(.98); }
.reveal-pop.in{ opacity: 1; transform: scale(1); }

/* Focus */
a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible{ outline: 2px solid color-mix(in oklab, var(--accent) 60%, transparent); outline-offset: 2px; }
